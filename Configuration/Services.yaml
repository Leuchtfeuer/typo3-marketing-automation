services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  Leuchtfeuer\MarketingAutomation\:
      resource: '../Classes/*'

  Leuchtfeuer\MarketingAutomation\EventListener\AddTcaPersonaRestrictionFieldEventListener:
    tags:
      - name: event.listener
        identifier: 'marketing-automation-persona-restriction-tca'
        event: TYPO3\CMS\Core\Configuration\Event\AfterTcaCompilationEvent

  Leuchtfeuer\MarketingAutomation\EventListener\ChangeDatabaseSchemaEventListener:
    tags:
      - name: event.listener
        identifier: 'marketing-automation-persona-restriction-database-schema'
        event: TYPO3\CMS\Core\Database\Event\AlterTableDefinitionStatementsEvent

  Leuchtfeuer\MarketingAutomation\EventListener\PageContentPreviewRenderingEventListener:
    tags:
      - name: event.listener
        identifier: 'marketing-automation-page-layout'
        event: TYPO3\CMS\Backend\View\Event\PageContentPreviewRenderingEvent

  Leuchtfeuer\MarketingAutomation\EventListener\BeforePageIsResolvedEventListener:
    tags:
      - name: event.listener
        identifier: 'marketing-automation-before-page-resolved'
        event: TYPO3\CMS\Frontend\Event\BeforePageIsResolvedEvent
